[**English**](readme.md) | [**한국어**](readme_kr.md)

# 앙상블 입찰 예측 시스템

![Status](https://img.shields.io/badge/Status-Production-success)
![Win Rate](https://img.shields.io/badge/낙찰률-8%25-brightgreen)
![Improvement](https://img.shields.io/badge/개선율-3.2배-blue)
![Tech](https://img.shields.io/badge/Tech-NGBoost_+_XGBoost-orange)

정부 조달 입찰 최적화를 위한 하이브리드 머신러닝 시스템.  
초경쟁 시장에서 **낙찰률 3.2배 개선** (2.5% → 8%) 달성.

---

## 시스템 아키텍처
```
과거 입찰 데이터 (10년, 1M 레코드)
    ↓
[1단계: NGBoost]
    ├─ 기관 편향성 탐지 (통계 검정)
    ├─ 불확실성 정량화
    └─ 신뢰도 점수 산출
    ↓
편향 점수 + 불확실성 점수 + 기타 Features
    ↓
[2단계: XGBoost]
    ├─ 입찰률 예측 (입찰가/기초금액)
    ├─ 바이너리 결과 최적화 (낙찰 or 0)
    └─ 입찰가 추천
    ↓
최종 입찰률 → 입찰가
```

---

## 성능 결과

### 낙찰률 개선

| 지표 | 베이스라인 | 최적화 후 | 개선율 |
|------|-----------|----------|--------|
| **자사 낙찰률** | 2.5% | **8%** | **3.2배** |
| **시장 대비** | 2.5배 | 8.0배 | - |
| **오류 감소** | - | - | ~68.75% |

---

## 문제 상황

### 시장 특성

**초경쟁 환경:**
- 입찰당 평균 참가자: **~100개 업체**
- 시장 평균 낙찰률: **~1%** (100명 중 1명)
- 자사 베이스라인: **2.5%** (시장 평균 2.5배)
- 목표: 바이너리 결과 시장에서 낙찰률 최대화 (낙찰 or 0)

**입찰 방식:**
- 봉인 입찰 + 랜덤 낙찰하한가
- 하한율 범위: 기관별 사전 공개 (예: 기초금액의 70~90%)
- 실제 하한가: 개찰 시 범위 내 랜덤 결정
- 낙찰자: 하한가 **이상** 최저가
- **결과:** 바이너리 (낙찰 = 계약 전체, 탈락 = 0)

**도전 과제:**
- 정보 비대칭: 경쟁사 입찰가 알 수 없음
- 랜덤성: 실제 하한가는 개찰 시까지 미지수
- 고위험: 잘못된 예측 = 확정 탈락

---

## 솔루션 접근법

### 2단계 앙상블 프레임워크

**1단계: 불확실성 정량화 (NGBoost)**

기관별 투찰 성향 패턴 모델링 및 체계적 편향성 정량화.

**NGBoost 선택 이유:**
- 하한가 행동의 확률 분포 포착
- 예측 불확실성 정량화
- **기관 편향성 탐지:**
  - **하향 편향:** 기관이 지속적으로 낮은 하한가 설정
  - **상향 편향:** 기관이 지속적으로 높은 하한가 설정
  - **중립:** 통계적으로 유의미한 편향 없음

NGBoost는 편향 패턴의 통계적 유의성을 검증하고 정량화합니다.

**출력:** 각 기관의 편향 점수 + 불확실성 점수

---

**2단계: 입찰률 예측 (XGBoost)**

편향성/불확실성을 feature로 활용한 최적 **입찰률** (입찰가/기초금액) 예측.

**XGBoost 선택 이유:**
- 복잡한 feature 상호작용 처리
- 노이즈와 이상치에 강건
- 프로덕션 검증된 안정성

**핵심 Features:**
- **NGBoost 편향 점수** (1단계 출력)
- **NGBoost 불확실성 점수** (1단계 출력)
- 과거 데이터 기반 추가 proprietary features

Feature engineering 방법론은 경쟁 정보를 포함하므로 공개하지 않습니다.

**출력:** 추천 입찰률 (절대 가격 아님)

**목표:**
- **이익 극대화 아님**
- **순수 승패 문제:** 올바른 입찰 = 계약 수주, 잘못된 입찰 = 0
- 바이너리 결과 시장에서 P(낙찰)을 최대화하는 입찰률 예측

---

**학습 데이터:**
- 과거 레코드: **1M 건** (10년치)
- 훈련 샘플: 800K
- 검증 샘플: 100K
- 테스트 샘플: 100K

**프로덕션 검증:**
- 테스트 기간: 6개월
- 샘플 크기: **75건** (실제 프로덕션 배포)
- 낙찰 건수: 7건 (베이스라인 예상 1-2건)

**맥락:**
- 시장: 입찰당 ~100명 참가 (평균 1% 낙찰률)
- 자사: 2.5%에서 시작 (이미 시장 평균 2.5배)
- **결과: 8.0% = 시장 평균의 8배**

---

## 비즈니스 임팩트

**정량적:**
- 낙찰률: 2.5% → 8.0% (+220%)
- 수주 기회: 3.2배 증가
- 프로덕션 운영: 월 10+ 건 처리

**정성적:**
- 직관 기반 → 시스템적 의사결정
- 수동 분석 시간 감소
- 다양한 시장 조건에서 일관된 성능
- **바이너리 결과 처리:** 전체 계약 수주 or 0

---

## 기술 구현

### 1단계: NGBoost - 편향성 탐지

**모델 설정:**
- Base learner: Decision trees
- 분포: Normal (Gaussian)
- 학습: 기관별 층화 샘플링

**기관 편향성 분석:**

기관별로 하한가 설정에 체계적 편향성 존재:

| 편향 유형 | 행동 패턴 | NGBoost 탐지 방법 |
|-----------|----------|-------------------|
| **하향 편향** | 하한가를 예상보다 지속적으로 낮게 설정 | 평균 μ < 범위 중간값 (통계적 유의) |
| **상향 편향** | 하한가를 예상보다 지속적으로 높게 설정 | 평균 μ > 범위 중간값 (통계적 유의) |
| **중립** | 체계적 패턴 없음 | 예상값에서 유의미한 편차 없음 |

NGBoost는 편향의 통계적 유의성을 검정한 후, 편향 방향과 크기를 feature로 정량화합니다.

**Feature 카테고리:**
- 기관 과거 하한가 패턴
- 입찰 특성
- 시장 상황

**출력:**
- 편향 방향 (↓ / → / ↑)
- 편향 강도 (패턴 강도)
- 불확실성 (예측 신뢰도)

---

### 2단계: XGBoost - 입찰률 예측

최적 **입찰률** (입찰가/기초금액) 예측, 편향성/불확실성을 feature로 활용.

**XGBoost 선택 이유:**
- 복잡한 feature 상호작용 처리
- 노이즈와 이상치에 강건
- 프로덕션 검증된 안정성

**핵심 Features:**
- **NGBoost 편향 점수** (1단계 출력)
- **NGBoost 불확실성 점수** (1단계 출력)
- 과거 데이터 기반 추가 proprietary features

Feature engineering 방법론은 경쟁 정보를 포함하므로 공개하지 않습니다.

**출력:** 추천 입찰률 (절대 가격 아님)

**목표:**
- **이익 극대화 아님**
- **순수 승패 문제:** 올바른 입찰 = 계약 수주, 잘못된 입찰 = 0
- 바이너리 결과 시장에서 P(낙찰)을 최대화하는 입찰률 예측

---

## 방법론 하이라이트

### 1. 기관 편향성 정량화

**통계 검정:**  
각 기관에 대해 NGBoost는 다음을 검정:
```
H0: 하한가 ~ Uniform(범위_최소, 범위_최대)
H1: 하한가가 체계적 편향성 보임
```

H1 확인 시 (p < 0.05):
- 편향 방향 측정 (↓ or ↑)
- 편향 강도 정량화 (효과 크기)
- 예측 불확실성 추정

**예시:**
```
기관 A: 하향 편향 탐지됨
  - 평균 하한가: 87.8% (범위: 87.745% - 88.113%)
  - 편향 강도: -0.13 percentage points
  - 신뢰도: 높음 (낮은 불확실성)

기관 B: 중립
  - 평균 하한가: 87.93% (범위: 87.745% - 88.113%)
  - 편향 강도: N/A
  - 신뢰도: 중간
```

---

### 2. 바이너리 결과 최적화

연속 최적화 문제와 달리, 이것은 순수 **바이너리**:
- 하한가 이상 입찰 + 최저가 → **전체 계약 수주**
- 하한가 미달 OR 최저가 아님 → **0**

이것이 최적화 전략을 변경:
- 초점: P(입찰가 < 하한가) 최소화
- 부차: 유효 입찰 중 최저가
- 고려 안 함: 이익률, 기대값

---

### 3. 시간순 검증

훈련/검증 분할 시 시간 순서 준수:
- 훈련: 1-8년차 (800K 건)
- 검증: 9년차 (100K 건)
- 테스트: 10년차 (100K 건)
- 프로덕션: 실제 배포 (6개월간 100건)

데이터 누수 방지 및 현실적 성능 추정 보장.

---

## 시스템 특성

**강점:**
- 확률론적 접근으로 내재된 랜덤성 처리
- 기관 편향성 탐지로 정확도 향상
- 2단계 설계로 관심사 분리
- 6개월+ 프로덕션 검증
- 바이너리 결과 처리 (낙찰 or 0)

**한계:**
- 정확한 하한가 예측 불가 (설계상 랜덤)
- 과거 데이터 품질 의존
- 시장 랜덤성으로 인한 일부 손실 불가피
- 바이너리 시장: 부분 낙찰 없음

---

## 코드 공개 범위

**포함:**
- ✅ High-level 방법론
- ✅ 성능 지표
- ✅ 시스템 아키텍처

**비포함:**
- ❌ Feature engineering 구현
- ❌ 모델 학습 코드
- ❌ 기관 편향성 탐지 알고리즘
- ❌ 최적화 전략

**이유:** 상업적 배포를 위해 개발된 proprietary 입찰 전략.

---

## 기술 스택

**머신러닝:**
- NGBoost: 편향 탐지 + 불확실성 정량화
- XGBoost: 입찰률 예측
- scikit-learn: 전처리 & 평가

**프로덕션:**
- Python 3.10+
- pandas, numpy
- 프로덕션 API 통합

**인프라:**
- CPU-only 배포
- 실시간 예측 (<1초 latency)

**데이터 규모:**
- 학습: 1M 레코드 (10년)
- 프로덕션: 75건 (6개월 검증)

---

## 프로젝트 배경

건설 엔지니어링 업체의 정부 조달 시장 입찰 최적화를 위해 개발. 
6개월 이상 프로덕션 운영 중, 바이너리 결과 시장(낙찰 or 0)에서 
**8% 낙찰률** 지속 달성.

**입증된 역량:**
- 앙상블 학습
- 통계적 편향 탐지
- 불확실성 정량화
- 바이너리 결과 최적화
- 프로덕션 ML 배포
- 도메인 전문성 활용

---

## 연락처

**Author:** Harim Choi  
**Email:** 2.harim.choi@gmail.com  
**GitHub:** [@HarimxChoi](https://github.com/HarimxChoi)

협업 또는 상세 방법론 문의는 이메일로 연락 주시기 바랍니다.

---

## 라이선스

본 프로젝트 문서는 MIT License로 제공됩니다.  
구현 코드는 proprietary입니다.
